/* ==========================================================================
   CDL Trainer -- style.css (Polished, Premium Version)
   ========================================================================== */

/* ────────────────────── 0. Root & Universal Styles ───────────────────────── */
:root {
  --brand-dark:   #0e1b1b;   /* deep forest black */
  --brand-mid:    #004d66;   /* deep teal */
  --brand-light:  #4e91ad;   /* faded blue edge */
  --accent:       #c4dbe8;   /* ice mist */
  --text-light:   #ffffff;
  --text-dark:    #e0e0e0;
  --card-bg:      rgba(255,255,255,0.06);
  --card-bg-dark: rgba(10,15,20,0.6);
  --toast-bg:     rgba(0,0,0,0.85);
  --toast-text:   #ffffff;
  --error:        #e53e3e;
  --success:      #48bb78;
}
*,
*::before,
*::after { box-sizing: border-box; }
html, body { margin: 0; padding: 0; height: 100%; color: var(--text-light); overflow-x: hidden; font-family: "Helvetica Neue", Arial, sans-serif; }
body { padding-top: env(safe-area-inset-top, 20px); }
body, html { height: 100%; margin: 0; padding: 0; overflow-x: hidden; }

/* ──────────────────── 1. Animated Gradient Background ─────────────────────── */
body {
  background: linear-gradient(-45deg, var(--brand-dark) 0%, var(--brand-mid) 25%, var(--brand-light) 50%, var(--brand-mid) 75%, var(--brand-dark) 100%);
  background-size: 600% 600%;
  animation: gradientFlow 12s linear infinite;
  color: var(--text-light);
}
@keyframes gradientFlow {
  0%   { background-position: 0% 40%; }
  50%  { background-position: 100% 60%; }
  100% { background-position: 0% 40%; }
}
body.dark-mode { background: #121212; color: var(--text-light); }

/* ────── 2. Glass Cards, Panels, Welcome, Login, Toast, Loader ────────────── */
.screen-wrapper, .profile-page, .login-card, .signup-card {
  background: var(--card-bg);
  backdrop-filter: blur(14px) saturate(135%);
  border-radius: 16px;
  box-shadow: 0 10px 32px rgba(0,0,0,0.18);
  color: var(--text-light);
  transition: background 0.3s, color 0.3s;
}
.screen-wrapper { padding: 2rem; }
.login-card, .signup-card {
  max-width: 400px; margin: 48px auto 0 auto; padding: 2.4rem 2rem 2rem 2rem; display: flex; flex-direction: column; gap: 1.5rem; animation: fadeInUp 0.6s cubic-bezier(.5,.95,.17,1.12);
}
.toast-message {
  position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
  background: var(--toast-bg); color: var(--toast-text);
  padding: 0.75rem 1.25rem; border-radius: 6px; font-size: 0.95rem; z-index: 1000;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2); animation: fadeInEnhanced 0.4s ease-out forwards;
}
/* Loader */
#app-loader {
  position: fixed; inset: 0; display: flex; align-items: center; justify-content: center;
  background: linear-gradient(-45deg, var(--brand-dark), var(--brand-mid), var(--brand-light), var(--brand-mid));
  background-size: 600% 600%; animation: gradientFlow 20s linear infinite;
  z-index: 9999; color: white; font-size: 2rem; opacity: 1; transition: opacity 0.3s;
}
#app-loader.hide, #app-loader.hidden { opacity: 0; pointer-events: none; }

/* ────── 3. Welcome/Onboarding Screen ───────────── */
.welcome-screen {
  min-height: 100vh; display: flex; flex-direction: column; justify-content: center;
  padding: 2rem; overflow-y: auto; scroll-behavior: smooth; position: relative; z-index: 1;
  isolation: isolate;
}
.welcome-content {
  background: var(--card-bg); backdrop-filter: blur(16px) saturate(140%);
  border-radius: 16px; padding: 4rem 3rem; margin: 5rem auto; max-width: 800px; width: 95%;
  color: var(--text-light); box-shadow: 0 12px 36px rgba(0,0,0,0.38); position: relative; z-index: 2;
  border: 1px solid rgba(255,255,255,0.08);
}
.welcome-content::before {
  content: ""; position: absolute; inset: -12px; border-radius: 20px;
  background: radial-gradient(ellipse at center, rgba(196,219,232,0.07), transparent 70%);
  box-shadow: 0 0 42px rgba(196,219,232,0.06); z-index: -1; pointer-events: none;
}
.welcome-content h1, .welcome-content .typewriter { text-shadow: 0 0 8px rgba(196,219,232,0.15); animation: pulseTextGlow 3.4s ease-in-out infinite; }
@keyframes pulseTextGlow { 0%,100%{text-shadow:0 0 6px rgba(196,219,232,0.15);} 50%{text-shadow:0 0 16px rgba(196,219,232,0.3);} }
.welcome-screen::after {
  content: ""; position: absolute; inset: 0; z-index: -2;
  background-image: url('noise.png'); opacity: 0.07; pointer-events: none; mix-blend-mode: screen;
}
.welcome-content .btn, #login-btn {
  display: block; margin: 2rem auto 0 auto; padding: 1rem 2.2rem; font-size: 1.1rem; border-radius: 10px;
  background: linear-gradient(135deg, var(--accent), #a8d2e2);
  box-shadow: 0 6px 18px rgba(196,219,232,0.25);
  transition: transform 0.25s, box-shadow 0.25s;
}
.welcome-content .btn:hover, #login-btn:hover {
  transform: translateY(-2px) scale(1.04);
  box-shadow: 0 10px 28px rgba(196,219,232,0.35);
}
.typewriter { font-size: 2rem; margin: 0 0 1rem; min-height: calc(2 * 1.2em); line-height: 1.2; overflow: hidden; }
.cursor { display: inline-block; vertical-align: bottom; animation: blink 0.7s step-end infinite; }
@keyframes blink { 50% { opacity: 0; } }
.fade-in { animation: fadeInUp 0.6s ease-out both; }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

/* ─────────── 4. Dashboard Card + Navigation Styles ────────────────────────── */
.dashboard-card {
  margin-bottom: 1.5rem !important; width: 96%; margin-left: auto; margin-right: auto;
  border-radius: 18px; background: linear-gradient(145deg,rgba(48,58,92,0.91) 75%,rgba(180,138,255,0.09) 100%);
  box-shadow: 0 6px 32px 0 #0003, 0 2px 0 0 rgba(180,138,255,0.09) inset;
  border: 1.5px solid rgba(180,138,255,0.11); position: relative; overflow: hidden;
  transition: box-shadow 0.19s, transform 0.18s;
  opacity: 0; animation: cardFadeIn 0.66s cubic-bezier(.43,.23,.6,1.34) forwards;
}
@keyframes cardFadeIn { from { opacity: 0; transform: translateY(26px) scale(0.98);} to { opacity: 1; transform: translateY(0) scale(1);} }
.dashboard-card:after {
  content: ''; display: block; pointer-events: none; position: absolute; top: -70px; right: -80px;
  width: 170px; height: 170px;
  background: radial-gradient(circle at 70% 30%, rgba(180,138,255,0.11) 0%, transparent 75%);
  z-index: 2;
}
.dashboard-card h3, .dashboard-card .card-title { font-size: 1.32em; margin-bottom: 0.3em; font-weight: bold; letter-spacing: 0.02em; }
.dashboard-card p, .dashboard-card .card-detail { font-size: 1em; opacity: 0.89; margin-bottom: 0; line-height: 1.5; }
.dashboard-card .dashboard-card-icon {
  font-size: 2em; display: inline-block; vertical-align: middle; margin-right: 0.4em;
  background: linear-gradient(120deg,#b48aff,#62e2ec 65%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}
.dashboard-card .progress-bar {
  width: 96%; height: 8px; border-radius: 8px; margin: 0.65em auto 1em auto;
  background: linear-gradient(90deg,#b48aff 0%,#62e2ec 100%); opacity: 0.12; position: relative; overflow: hidden;
}
.dashboard-card .progress-bar-fill {
  height: 100%; border-radius: 8px; background: linear-gradient(90deg,#b48aff 0%,#62e2ec 100%);
  opacity: 0.99; box-shadow: 0 2px 7px #b48aff66; transition: width 0.55s cubic-bezier(.38,1.62,.61,1);
}
.dashboard-card:active, .dashboard-card:focus {
  box-shadow: 0 8px 32px #b48aff44, 0 2px 0 0 rgba(180,138,255,0.15) inset;
  transform: scale(0.98);
  transition: box-shadow 0.13s, transform 0.13s;
}

/* Nav Buttons */
.dashboard-nav-row {
  display: flex; justify-content: center; gap: 1.2rem; margin: 1.9rem 0 0 0; flex-wrap: wrap;
}
.dashboard-nav-btn {
  background: linear-gradient(120deg,rgba(255,255,255,0.11) 40%,rgba(180,138,255,0.16) 100%);
  border: none; border-radius: 19px; min-width: 108px; min-height: 108px; font-size: 1.12em; font-weight: bold;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  box-shadow: 0 4px 22px #0001; color: var(--text-light, #fff);
  transition: background 0.17s, box-shadow 0.18s, transform 0.15s; margin: 0; outline: none; cursor: pointer;
  position: relative; overflow: hidden; opacity: 0; animation: cardFadeIn 0.66s cubic-bezier(.43,.23,.6,1.34) forwards;
}
.dashboard-nav-btn i {
  font-size: 2.15em; margin-bottom: 0.18em; background: linear-gradient(100deg,#b48aff 30%,#62e2ec 80%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; display: block;
}
.dashboard-nav-btn:active, .dashboard-nav-btn:focus {
  background: linear-gradient(120deg,#b48aff22 50%,#62e2ec1a 100%);
  color: #fff; box-shadow: 0 2px 15px #b48aff44; transform: scale(0.98);
}

/* Logout Button */
#logout-btn {
  margin: 2rem auto 1.3rem auto; display: block; width: 97%; max-width: 330px;
  background: linear-gradient(120deg,rgba(255,255,255,0.13),rgba(180,138,255,0.10));
  border-radius: 13px; font-weight: bold; box-shadow: 0 2px 15px #0001;
  transition: background 0.15s, box-shadow 0.15s, transform 0.14s;
  opacity: 0; animation: cardFadeIn 0.66s cubic-bezier(.43,.23,.6,1.34) forwards;
}
#logout-btn:active, #logout-btn:focus {
  background: linear-gradient(120deg,#b48aff22,#62e2ec16);
  box-shadow: 0 2px 11px #b48aff55; transform: scale(0.98);
}

/* Section Divider */
.section-divider {
  height: 2px; background: linear-gradient(90deg,transparent,rgba(180,138,255,0.11),transparent);
  border-radius: 2px; margin: 2.2rem 0 1.2rem 0; width: 92%; margin-left: auto; margin-right: auto;
}

/* ────── 5. Flashcards ───────────────────────────── */
.flashcard-card {
  background: #23263a; color: var(--text-light,#fff); border-radius: 16px; margin: 24px 0; padding: 0;
  font-size: 1.16em; cursor: pointer; box-shadow: 0 6px 30px #0002; min-height: 140px; text-align: center;
  transition: box-shadow 0.2s, background 0.2s, transform 0.45s; will-change: transform; perspective: 1000px;
  position: relative; opacity: 0; animation: cardFadeIn 0.65s cubic-bezier(.43,.23,.6,1.34) forwards;
}
.flashcard-card::after {
  content: "🔄 Tap to flip"; position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%);
  font-size: 0.85em; opacity: 0.5; color: #ccc; pointer-events: none;
}
.flashcard-card:hover {
  box-shadow: 0 0 24px var(--accent,#b48aff),0 6px 40px #23263a77;
  transform: translateY(-3px) scale(1.025);
}
.flashcard-card-inner {
  transition: transform 0.6s cubic-bezier(0.34,1.56,0.64,1);
  transform-style: preserve-3d; position: relative; height: 100%;
}
.flashcard-card.flipped .flashcard-card-inner { transform: rotateY(180deg); }
.flashcard-front,.flashcard-back {
  display: flex; align-items: center; justify-content: center; font-size: 1.2em;
  padding: 24px; min-height: 140px; border-radius: 16px; position: absolute;
  width: 100%; height: 100%; backface-visibility: hidden; transition: background 0.3s; user-select: none;
}
.flashcard-front { background: #23263a; color: var(--text-light); z-index: 2; }
.flashcard-back { background: #3c3866; color: #ffe688; transform: rotateY(180deg); box-shadow: 0 4px 28px #2223; }

/* ────── 6. Practice Tests & Review ───────────────────────────── */
.test-list { display: flex; flex-direction: column; gap: 1.2rem; margin-top: 1.2rem; }
.glass-card { background: rgba(255,255,255,0.07); border-radius: 16px; box-shadow: 0 8px 30px rgba(0,0,0,0.15); backdrop-filter: blur(10px); padding: 20px; color: var(--text-light); transition: transform 0.3s; }
.glass-card:hover { transform: translateY(-3px) scale(1.01); }
.btn-grid { display: flex; flex-direction: column; gap: 0.75rem; margin-top: 0.5rem; }
.btn.wide { width: 100%; font-weight: bold; padding: 14px 18px; border-radius: 12px; font-size: 1.05em; }
.badge { font-size: 0.8em; padding: 4px 10px; margin-left: 8px; border-radius: 999px; font-weight: 600; display: inline-block; }
.badge-success { background-color: #2ecc71; color: #fff; }
.badge-fail { background-color: #e74c3c; color: #fff; }
.badge-neutral { background-color: #666a; color: #fff; }
.test-review-page h2 { font-size: 1.6em; margin-bottom: 0.4em; }