// app.js

alert("ğŸš€ app.js loaded â€“ imports start");

// â”€â”€â”€ 1. MODULE IMPORTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
import {
  getFirestore,
  collection,
  query,
  where,
  getDocs,
  addDoc,
  doc,
  getDoc,
  setDoc,
  updateDoc,
  deleteDoc
} from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";
import {
  getAuth,
  onAuthStateChanged,
  signOut,
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword,
  sendPasswordResetEmail,
  updateProfile,
  GoogleAuthProvider,
  signInWithPopup
} from "https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js";
import { showToast as importedShowToast } from "./ui-helpers.js";

// â”€â”€â”€ 2. FIREBASE CONFIG & INITIALIZATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const firebaseConfig = {
  apiKey:            "AIzaSyCHGQzw-QXk-tuT2Zf8EcbQRz7E0Zms-7A",
  authDomain:        "cdltrainerapp.firebaseapp.com",
  projectId:         "cdltrainerapp",
  storageBucket:     "cdltrainerapp.appspot.com",
  messagingSenderId: "977549527480",
  appId:             "1:977549527480:web:e959926bb02a4cef65674d",
  measurementId:     "G-MJ22BD2J1J"
};

const app  = initializeApp(firebaseConfig);
const db   = getFirestore(app);
const auth = getAuth(app);

alert("âœ… Imports & config OK");

// â”€â”€â”€ 3. AUTH STATE LISTENER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
alert("ğŸ”” Attaching auth listener");
onAuthStateChanged(auth, user => {
  alert("ğŸ”” Auth state changed: user=" + (user?.email || "null"));
  if (user) {
    appEl.innerHTML = `<div style="padding:20px;text-align:center;"><h1>Signed in as ${user.email}</h1></div>`;
  } else {
    alert("ğŸ No user signed in, showing welcome");
    renderWelcome();
  }
});

  alert("âœ… Auth listener attached");

// â”€â”€â”€ 4. UTILITY FUNCTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showToast(message, duration = 3000) { /* â€¦ */ }
function showModal(html) { /* â€¦ */ }
function closeModal()    { /* â€¦ */ }
function getRoleBadge(email) { /* â€¦ */ }
async function getAITipOfTheDay() { /* â€¦ */ }

alert("âœ… Utilities OK");

// â”€â”€â”€ 5. SIMPLE RENDER & TEST UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderWelcome() {
  const appEl = document.getElementById("app");
  if (!appEl) {
    alert("âŒ #app not found");
    return;
  }
  appEl.innerHTML = `
    <div style="padding:20px; text-align:center;">
      <h1>Welcome!</h1>
      <button id="login-btn">ğŸš€ Login</button>
    </div>
  `;
  document.getElementById("login-btn").onclick = () => alert("ğŸ”‘ Login clicked");
}

// Final step in this test harness
renderWelcome();